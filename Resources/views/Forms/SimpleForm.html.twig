<form action="{{action}}" enctype="{{encType}}" method="post" name="{{formId}}" id="{{formId}}">
    <div class="row">
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
            <h1>{{title | default('')}}</h1>
            {% include defaultTemplate %}
            {% if captcha is defined %}
                {% include captcha['defaultTemplate'] with captcha only %}
            {% endif %}
            {{rest | raw}}
        </div>
        <div class="col-lg-3 col-md-3 hidden-sm hidden-xs">
                <div>
                    <div class="sergsxmui-tabs-navbar-buttons">
                        {% if readOnly == false %}
                            {% if backUrl is defined %}<button type="submit" class="btn btn-primary" name="back" value="true">{% trans from "sergsxmui" %}Save{% endtrans %}</button>{% endif %}
                            <button type="submit" class="btn btn-default">{% trans from "sergsxmui" %}Apply{% endtrans %}</button>
                        {% endif %}
                        {% if backUrl is defined %}<a href="{{backUrl}}" class="btn btn-default">{% trans from "sergsxmui" %}Cancel{% endtrans %}</a>{% endif %}
                    </div>
                    <ul class="nav nav-pills nav-stacked">
                        {% for group in groups %}
                            {% if group.description != '' %}
                                <li><a href="#{{group.groupId}}">{{group.description}}</a></li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
        </div>
        <div class="hidden-lg hidden-md col-sm-12 col-xs-12">
            {% if readOnly == false %}
                {% if backUrl is defined %}<button type="submit" class="btn btn-primary" name="back" value="true">{% trans from "sergsxmui" %}Save{% endtrans %}</button>{% endif %}
                <button type="submit" class="btn btn-default">{% trans from "sergsxmui" %}Apply{% endtrans %}</button>
            {% endif %}
            {% if backUrl is defined %}<a href="{{backUrl}}" class="btn btn-default">{% trans from "sergsxmui" %}Cancel{% endtrans %}</a>{% endif %}
        </div>
    </div>
    <script>
        function formValidation_{{formId}} (element, log) {
            var form = document.forms['{{formId}}'];
            var errors = {};
            {{jsValidation | raw}}
            if (element !== undefined) {
                var inputId = ($(element).data('replace-input-id') ? $(element).data('replace-input-id') : $(element).prop('id'));
                if (errors[inputId] != undefined) {
                    $('.'+inputId+'-container').addClass('has-error');
                    $('.'+inputId+'-error').text(errors[inputId]);
                } else {
                    $('.'+inputId+'-container').removeClass('has-error');
                    $('.'+inputId+'-error').text('');
                }
            } else {
                $('#{{formId}} .has-error').removeClass('has-error');
                $('#{{formId}} .form-error-text').text('');
                for (var inputId in errors) {
                    $('.'+inputId+'-container').addClass('has-error');
                    $('.'+inputId+'-error').text(errors[inputId]);
                }
            }
            {{jsVisibility | raw}}
            if ((log !== undefined) && (log == true)) {
                return errors;
            }
            for (var inputId in errors) {
                return false;
            }
            return true;
        }
        $(function () {
            sergsxmUIFunctions.initWysiwyg('#{{formId}} textarea.form-wysiwyg');
            sergsxmUIFunctions.initDraggableElements('#{{formId}} .form-draggable');
            sergsxmUIFunctions.initFileUploadInput(
                '#{{formId}} input.form-file-upload', 
                '{{formId}}', 
                '%input%{% trans with {'%name%': '%name%', '%size%': '%size%'} from "sergsxmui" %}%name% (%size% bytes){% endtrans %}', 
                formValidation_{{formId}},
                function (id, error) {
                    $('.'+id+'-container').addClass('has-error');
                    $('.'+id+'-error').text(error);
                }
            );
            sergsxmUIFunctions.initImageUploadInput(
                '#{{formId}} input.form-image-upload', 
                '{{formId}}', 
                '%input%<div class="thumbnail sergsxmui-form-thumbnail"><img src="%thumbnail%" title="{% trans with {'%name%': '%name%', '%size%': '%size%'} from "sergsxmui" %}%name% (%size% bytes){% endtrans %}" /></div>', 
                formValidation_{{formId}},
                function (id, error) {
                    $('.'+id+'-container').addClass('has-error');
                    $('.'+id+'-error').text(error);
                }
            );
            sergsxmUIFunctions.initMultiplyFileUploadInput(
                '#{{formId}} input.form-file-upload-multiply', 
                '{{formId}}', 
                '<li class="list-group-item">%input%{% trans with {'%name%': '%name%', '%size%': '%size%'} from "sergsxmui" %}%name% (%size% bytes){% endtrans %}<button type="button" class="close" onclick="$(this).closest(\'.list-group-item\').remove();return false;"><span>&times;</span></button></li>', 
                formValidation_{{formId}},
                function (id, error) {
                    $('.'+id+'-container').addClass('has-error');
                    $('.'+id+'-error').text(error);
                }
            );
            sergsxmUIFunctions.initMultiplyImageUploadInput(
                '#{{formId}} input.form-image-upload-multiply', 
                '{{formId}}', 
                '<div class="thumbnail sergsxmui-form-thumbnail">%input%<img src="%thumbnail%" title="{% trans with {'%name%': '%name%', '%size%': '%size%'} from "sergsxmui" %}%name% (%size% bytes){% endtrans %}" /><button type="button" class="close" onclick="$(this).closest(\'.thumbnail\').remove();return false;"><span>&times;</span></button></div>',
                formValidation_{{formId}},
                function (id, error) {
                    $('.'+id+'-container').addClass('has-error');
                    $('.'+id+'-error').text(error);
                }
            );

            $('#{{formId}} input, #{{formId}} textarea, #{{formId}} select').change(function () {
                formValidation_{{formId}}(this);
            });
            $('#{{formId}}').submit(function () {
                return formValidation_{{formId}}();               
            });
            var form = document.forms['{{formId}}'];
            {{jsVisibility | raw}}
        });
    </script>
</form>
